---
title: How many women in New York are pregnant right now?
author:
date: "2018-01-16"
slug: nys-pregnancy
draft: true
tags:
  - rstats
  - mapping
  - census
---



<p>When I found out that J was pregnant, my first thought was OMG, I’m so excited to be a dad! My second thought was, I wonder <em>how many other women in New York are also pregnant right now?</em> Knowing that there was plenty of health and demographic public data available, I was pretty sure I could answer this question.</p>
<p>After a little googling, I found <a href="https://www.cdc.gov/reproductivehealth/emergency/pdfs/PregnacyEstimatoBrochure508.pdf">this brief</a> from the Centers for Disease Control and Prevention (CDC) which details how to estimate the number of pregnant women in a geographic area. Bingo!</p>
<p>To calculate the number of pregnant women in a given area, you need to specify four parameters:</p>
<ul>
<li>Number of women of reproductive age [WRA] (15 – 44 years old)</li>
<li>Fertility rate (live births per 1,000 WRA)</li>
<li>Abortion rate (induced abortions per 1,000 WRA)</li>
<li>Fetal loss rate (fetal deaths per 1,000 WRA)</li>
</ul>
<p>With these parameters, there is a very simple calculation to arrive at the total number of women who are pregnant. Given the following variables:</p>
<p><span class="math display">\[
\begin{aligned}
wra ={} &amp; \text{women of reproductive age}\\
b ={} &amp; \text{fertility rate (births)}\\
a ={} &amp; \text{abortion rate} \\
d ={} &amp; \text{fetal loss rate (deaths)} \\
P ={} &amp; \text{proportion of the year a woman} \\
      &amp; \text{is pregnant for each outcome} \\
      &amp; P_b\colon \text{ 9 months} = .75 \\
      &amp; P_a\colon \text{ 2 months} = .167 \\
      &amp; P_d\colon \text{ 3 months} = .25
\end{aligned}
\]</span></p>
<p>The equation to estimate the number of women who live in a given geographical area that are currently pregnant is:</p>
<p><span class="math display">\[
\begin{aligned}
wra/1000 \times ((b \times P_b) + (a \times P_a) + (d \times P_d))
\end{aligned}
\]</span></p>
<p>Following the CDC guidance, I determined the best and most recent sources of data for each of these parameters for New York State:</p>
<ul>
<li>NYS Department of Health Vital Statistics, 2015, <a href="https://www.health.ny.gov/statistics/vital_statistics/2015/table01a.htm">Table 1a</a></li>
<li>NYS Department of Health Vital Statistics, 2015, <a href="https://www.health.ny.gov/statistics/vital_statistics/2015/table07.htm">Table 7</a></li>
<li>NYS Department of Health Vital Statistics, 2015, <a href="https://www.health.ny.gov/statistics/vital_statistics/2015/table21.htm">Table 21</a></li>
<li>CDC National Vital Statistics Reports, 2012, <a href="https://www.cdc.gov/nchs/data/nvsr/nvsr60/nvsr60_07.pdf">Table 1</a><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></li>
</ul>
<p>The NYS Department of Health report this data at the county level, so I will calculate results for each of New York’s 62 counties.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> I will also use socidemogaphic data from the American Community Survey to contextulize the results.</p>
<p>Let’s get to it!</p>
<p>The first step is to scrape and clean the vital statistics data from the <a href="https://www.health.ny.gov/statistics/vital_statistics/2015/">NYS Department of Health website</a>.</p>
<pre class="r"><code>library(tidyverse)
library(rvest)

# nys health data lives here
health_web &lt;- &quot;https://www.health.ny.gov/statistics/vital_statistics/2015/&quot;

# each parameter lives in a table on a different page
pop &lt;- read_html(paste0(health_web, &quot;table01a.htm&quot;))
birth &lt;- read_html(paste0(health_web, &quot;table07.htm&quot;))
abort &lt;- read_html(paste0(health_web, &quot;table21.htm&quot;))</code></pre>
<pre class="r"><code># define a function to find and parse the table node,
# select the columns i need, and make it into a tibble
# thankfully, the table formatting is the same on each page
read_nys_xml_table &lt;- function(x) {
  html_nodes(x, &quot;table&quot;) %&gt;%
    html_table(fill = TRUE) %&gt;%
    as.data.frame() %&gt;%  # i&#39;m not sure why i can&#39;t coerce directly to tibble
    as_tibble() %&gt;%
    slice(-(c(1:5, 11:12)))
  }

# parse and clean population
population &lt;- read_nys_xml_table(pop) %&gt;%
  transmute(
    county = County,
    pop_wra = as.integer(str_replace(Var.2, &quot;,&quot;, &quot;&quot;))
    ) %&gt;%
  # combine essex/hamilton counties
  add_row(
    county = &quot;Essex/Hamilton&quot;,
    pop_wra = sum(.$pop_wra[.$county %in% c(&quot;Essex&quot;, &quot;Hamilton&quot;)])
    ) %&gt;%
  filter(!county %in% c(&quot;Essex&quot;, &quot;Hamilton&quot;))

# parse and clean live births
live_births &lt;- read_nys_xml_table(birth) %&gt;%
  transmute(
    county = County,
    live_births = as.integer(str_replace(Var.2, &quot;,&quot;, &quot;&quot;))
    ) %&gt;%
  # combine essex/hamilton counties
  add_row(
    county = &quot;Essex/Hamilton&quot;,
    live_births = sum(.$live_births[.$county %in% c(&quot;Essex&quot;, &quot;Hamilton&quot;)])
    ) %&gt;%
  filter(!county %in% c(&quot;Essex&quot;, &quot;Hamilton&quot;))

# parse and clean abortions
abortions &lt;- read_nys_xml_table(abort) %&gt;%
  transmute(
    county = County,
    abortions = as.integer(str_replace(Var.2, &quot;,&quot;, &quot;&quot;))
    ) %&gt;%
  # essex/hamilton is already aggregated here, but repeated as hamilton/essex
  filter(county != &quot;Hamilton/Essex&quot;)

# let&#39;s print one of those tibbles to make sure it looks right
live_births</code></pre>
<pre><code>## # A tibble: 61 x 2
##    county      live_births
##    &lt;chr&gt;             &lt;int&gt;
##  1 Bronx             21130
##  2 Kings             41514
##  3 New York          17775
##  4 Queens            30335
##  5 Richmond           5286
##  6 Albany             3161
##  7 Allegany            496
##  8 Broome             1972
##  9 Cattaraugus         880
## 10 Cayuga              716
## # ... with 51 more rows</code></pre>
<p>Now that we’ve got all the Department of Health data cleaned up, we need to combine these</p>
<pre class="r"><code># preg_rate &lt;- reduce(list(population, live_births, abortion), left_join) %&gt;%
#   mutate(
#     fertility_rate = (live_births / pop_wra) * 1000,
#     abortion_rate = (abortion_tot / pop_wra) * 1000,
#     fetal_loss_rate = 17.9, # via table 1 https://www.cdc.gov/nchs/data/nvsr/nvsr60/nvsr60_07.pdf
#     preg_tot = as.integer(
#     (pop_wra / 1000) * 
#       ((fertility_rate * 0.75) + (abortion_rate * 0.167) + (fetal_loss_rate * 0.25)))
#     ) %&gt;%
#   mutate(county = recode(county, &quot;St Lawrence&quot; = &quot;St. Lawrence&quot;))</code></pre>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>The CDC recommend that that national fetal loss rate be used as it does not vary systematically by geography and the CDC national estimate is likely more accurate than state Deaprtments of Health.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Due to the small number of abortions in Essex and Hamilton Counties, the NYS Department of Health reports combined numbers for these counties to protect privacy. Therefore, I aggregate all rates and calculations for these two counties.<a href="#fnref2">↩</a></p></li>
</ol>
</div>
